<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src=" https://cdn.jsdelivr.net/npm/sweetalert2@11.10.6/dist/sweetalert2.all.min.js "></script>
    <link href=" https://cdn.jsdelivr.net/npm/sweetalert2@11.10.6/dist/sweetalert2.min.css " rel="stylesheet">

    <title>Quizz dos interruptores</title>
</head>
<body>
    
    
    <div class="divDescricao">
        <h3 id="qtdVisitas">VISITAS DISPONÍVEIS: 2</h3>
    </div>

    <div class="textoCenter">INTERRUPTORES</div>
    <div class="divDescricao">
        <h2 class="descInterruptores">A</h2>
        <h2 class="descInterruptores">B</h2>
        <h2 class="descInterruptores">C</h2>
    </div>
    <div class="divInterruptores">
        <div class="interruptor" id="intA" onclick="acionaInterruptor('intA')" style="background-color: red;">OFF</div>
        <div class="interruptor" id="intB" onclick="acionaInterruptor('intB')" style="background-color: red;">OFF</div>
        <div class="interruptor" id="intC" onclick="acionaInterruptor('intC')" style="background-color: red;">OFF</div>
    </div>  
    
    <div class="textoCenter">SALAS</div>
    <div class="divDescricao">
        <select id="respSala1">
            <option value="1">A</option>
            <option value="2">B</option>
            <option value="3">C</option>
        </select>
        <select id="respSala2">
            <option value="1">A</option>
            <option value="2">B</option>
            <option value="3">C</option>
        </select>
        <select id="respSala3">
            <option value="1">A</option>
            <option value="2">B</option>
            <option value="3">C</option>
        </select>
    </div>
    <div class="divSalas">
            <div class="sala" id="sala1" onclick="mostraSala(0)">VISITAR SALA</div>
            <div class="sala" id="sala2" onclick="mostraSala(1)">VISITAR SALA</div>
            <div class="sala" id="sala3" onclick="mostraSala(2)">VISITAR SALA</div>
    </div>
    
    <div class="divBotao"><button onclick="verificaResposta()">ENVIAR RESPOSTA</button></div>
    
    
    <style>
        .divDescricao {  
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: center;
            
        }

        button{
            height: 40PX;
            cursor: pointer;
            border-radius: 20PX;
            font-size: large;
            font-weight: bold;
        }
        button:hover{
            background-color: rgb(22, 141, 85);
            height: 45px;
            transition: height 0.7s;
                opacity: 1;
            border-color: rgb(15, 88, 0);
            border-style: solid;
            border-width: 2px;
            
        }

        .divBotao{
            margin: 0 auto;
            text-align: center;
        }

        select, .descInterruptores{
            width: 80px;
            
            margin: 0 auto;
            margin-bottom: 3px;
            margin-top: 3px;
            
            text-align: center;
            
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: center;
        }
        .textoCenter{
            background-color: rgb(110, 130, 131);
            margin: 0 auto;
            text-align: center;
        }
        
        .divInterruptores {  
            margin-bottom: 10%;
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: center;
        }

        .divSalas {  
            margin-bottom: 5%;
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: center;
            
        }

        .sala{
            width: 80px;
            height: 50px;
            margin: 0 auto;
            
            border-width: 1px;
            border-style: solid;
            border-radius: 20px;
            text-align: center;

            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }

        .interruptor{
            width: 80px;
            height: 50px;
            margin: 0 auto;
            background-color: red;
            border-width: 1px;
            border-style: solid;
            border-radius: 20px;
            text-align: center;
            
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            
        }
        #sala1{
            background-color: lightcoral;
        }

        #sala2{
            background-color: lightseagreen;
        }
        #sala3{
            background-color: limegreen;
        }
    </style>

<script>
    
    Swal.fire({
        title: "Problema das Lâmpadas",
        html: '<div style="text-align: left;">Você está em uma sala com três interruptores, cada um conectado a uma lâmpada em uma sala diferente. <br><br>Da sala dos interruptores você não consegue ver as lâmpadas, tendo apenas duas (02) oportunidades de ir até as salas verificar o estado das lampadas, mas pode ligar e desligar os interruptores quantas vezes quiser. <br><br>Seu objetivo é descobrir qual interruptor controla qual lâmpada. Você pode verificar duas salas antes de enviar sua resposta.</div>'
    });
    var interruptores = new Array(1,2,3)
    shuffleArray(interruptores)
    var intA = false
    var intB = false
    var intC = false
    var qtd_visitas = 2

    var salas = [false, false, false] 
    console.log(interruptores)
    console.log(salas)
    
    function verificaResposta(){
        respSala1 = document.getElementById('respSala1').value
        respSala2 = document.getElementById('respSala2').value
        respSala3 = document.getElementById('respSala3').value
        if (respSala1 == interruptores[0] && respSala2 == interruptores[1] && respSala3 == interruptores[2]){
            Swal.fire("Você acertou!");
        }
        else {
            Swal.fire("Você errou!");
        }
    }

    function mostraSala(numeroSala){
        if(qtd_visitas > 0){
            if(salas[numeroSala] == false){
                Swal.fire("A luz está desligada")
                qtd_visitas--
            }
            else{
                Swal.fire("A luz está ligada")
                qtd_visitas--
            }

            document.getElementById('qtdVisitas').innerHTML = "VISITAS DISPONÍVEIS: " + qtd_visitas
        } else{
            Swal.fire('QTD de visitas excedidas. Envie sua resposta.')
        }
    }

    function acionaInterruptor(interruptor){
        if(document.getElementById(interruptor).style.backgroundColor == "red"){
            document.getElementById(interruptor).style.backgroundColor = "green"
            document.getElementById(interruptor).innerHTML = "ON"
            if(interruptor == "intA"){
                salas[interruptores[0] - 1] = true
            } else if(interruptor == "intB"){
                salas[interruptores[1] - 1] = true
            } else if(interruptor == "intC"){
                salas[interruptores[2] - 1] = true
            }
        }
        else{
            document.getElementById(interruptor).style.backgroundColor = "red"
            document.getElementById(interruptor).innerHTML = "OFF"
            if(interruptor == "intA"){
                salas[interruptores[0] - 1] = false
            } else if(interruptor == "intB"){
                salas[interruptores[1] - 1] = false
            } else if(interruptor == "intC"){
                salas[interruptores[2] - 1] = false
            }
        }
    }

    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }
    
</script>
</body>
</html>